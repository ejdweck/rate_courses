{% extends 'index.html' %}

{% block content %}
<br>
<div class="container">
	<div class="row">
	  <div class="container">
	  	<form method="get" action="/search/" role="search">
		    <div class="input-group">
		      <input type="text" class="form-control" placeholder="Search for a course review by course or instructor" name="searchbox">
		      <span class="input-group-btn">
		        <button value="Search" type="text" id="search-submit" class="btn btn-secondary">Search</a>
		      </span>
		    </div>
	        <small id="help" class="form-text text-muted">Confused about ratings or card colors? Check out the <a href="{% url 'about' %}">about page</a> </small>
		</form>
	  </div>
	</div>
</div>
<br>
<div class="container"> 
	<h2>Courses offered at UW Madison</h2>
	<div class="card-deck">
	 {% for course in courses %}
	    <div class="card border-dark mb-3 color{{course.rating}}" id="card_box">
	    	<div class="card-header">
		    	    <h6 >{{course.courseDepartment}}{{course.courseNumber}}</h6>
					<h6 class="card-subtitle text-muted">Intro To Artificial Intelligence and Systems Engineering</h6>
	    	</div>
		    <div class="card-body text-dark" data-toggle="modal" data-target=".review-{{course.reviewId}}">
				<div class="modal fade course-review-modal review-{{course.reviewId}}" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
				  <div class="modal-dialog modal-lg ">
				    <div class="modal-content">
				    	<div class="modal-header">
					    	<h5 class="modal-title" id="course-code-modal">{{course.courseDepartment}}{{course.courseNumber}}</h5>
					    </div>
	  			        <div class="modal-body">
					    	<h5 class="modal-title text-muted" id="course-title-modal">{{course.courseName}}</h5>
					    	<div class="row">
					    		<div class="col-md-6">
							    	
						    	</div>
						    	<div class="col-md-6">
									<canvas id="pie-chart" width="20" height="10"></canvas>
									<script>
									new Chart(document.getElementById("pie-chart"), {
									    type: 'pie',
									    data: {
									      labels: ["Africa", "Asia", "Europe", "Latin America", "North America"],
									      datasets: [{
									        label: "Population (millions)",
									        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
									        data: [2478,5267,734,784,433]
									      }]
									    },
									    options: {
									      title: {
									        display: true,
									        text: 'Predicted world population (millions) in 2050'
									      }
									    }
									});	
									</script>
						    	</div>
					    	</div>
					    </div>
					    <div class="modal-footer">
						    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					    </div>
				    </div>
				  </div>
				</div>
		        <div class="card review-card">
		        </div>
		    </div>
			<p class="card-text">Average Rating: {{course.averageRating}}</p>
  	        <p class="card-text">Number of Ratings: {{course.numberOfRatings}}</p>
		    <div class="card-footer">
		      <small class="text-muted"></small>
		    </div>
		</div>

	  {% endfor %}
	</div>
</div>
{% endblock %}
