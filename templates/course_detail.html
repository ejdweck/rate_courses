{% extends 'index.html' %}
{% block content %}
<div class="container-fluid">
	<h3 id="course-detail-code">{{course.courseDepartment}}{{course.courseNumber}}</h3>
	<h3 class="text-muted" id="course-detail-name">{{course.courseName}}</h3>
	<h6 id="course-detail-credits">3 credits</h6>
	<h5 id="course-detail-description">The course description name will go here and there will be lots of nice info about the course.  It is. nice to have information that is helpful. wwwatermelon mashed potato watermelon mashed potato nice niceniceatermelon mashed potato watermelon mashed potato nice niceniceatermelon mashed potato watermelon mashed potato watermelon mashed potato nice nicenicewatermelon mashed potato nice nicenicewatermelon mashed potato watermelon mashed potato nice nicenice </h5>
	<br>
	<div class="row">
		<div class="col-md-6">
			<h3>Grade Data</h3>
			<canvas id="myChart"></canvas>
			<script>
			var ctx = document.getElementById("myChart").getContext('2d');
			var myChart = new Chart(ctx, {
			    type: 'bar',
			    data: {
			        labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
			        datasets: [{
			            label: '# of Votes',
			            data: [12, 19, 3, 5, 2, 3],
			            backgroundColor: [
			                'rgba(255, 99, 132, 0.2)',
			                'rgba(54, 162, 235, 0.2)',
			                'rgba(255, 206, 86, 0.2)',
			                'rgba(75, 192, 192, 0.2)',
			                'rgba(153, 102, 255, 0.2)',
			                'rgba(255, 159, 64, 0.2)'
			            ],
			            borderColor: [
			                'rgba(255,99,132,1)',
			                'rgba(54, 162, 235, 1)',
			                'rgba(255, 206, 86, 1)',
			                'rgba(75, 192, 192, 1)',
			                'rgba(153, 102, 255, 1)',
			                'rgba(255, 159, 64, 1)'
			            ],
			            borderWidth: 1
			        }]
			    },
			    options: {
			        scales: {
			            yAxes: [{
			                ticks: {
			                    beginAtZero:true
			                }
			            }]
			        }
			    }
			});
			</script>
		</div>
		<div class="col-md-6">
			<h3>Course Reviews</h3>
			<div class="card-deck">
				{% for course_review in course_reviews %}
				<div class="card border-dark mb-3 color{{course.rating}}" id="card-box-card-detail">
			    	<div class="card-header">
				    	    <h6 >{{course_review.courseId.courseDepartment}}{{course_review.courseId.courseNumber}}</h6>
							<h6 class="card-subtitle text-muted">Intro To Artificial Intelligence and Systems Engineering</h6>
			    	</div>
				    <div class="card-body text-dark" data-toggle="modal" data-target=".review-{{course.reviewId}}">
						<div class="modal fade course-review-modal review-{{course.reviewId}}" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
						  <div class="modal-dialog modal-lg ">
						    <div class="modal-content">
						    	<div class="modal-header">
							    	<h5 class="modal-title" id="course-code-modal">{{course_review.courseId.courseDepartment}}{{course_review.courseId.courseNumber}}</h5>
							    </div>
			  			        <div class="modal-body">
							    	<h5 class="modal-title text-muted" id="course-title-modal">{{course_review.courseId.courseName}}</h5>
							    	<div class="row">
							    		<div class="col-md-6">
									    	<div class="card review-card">
										        <p class="review-title">Review</p>
										        <p class="review-text">{{course_review.review}}</p>
									        </div>
								    	</div>
								    	<div class="col-md-6">
											<canvas id="pie-chart" width="20" height="10"></canvas>
											<script>
											new Chart(document.getElementById("pie-chart"), {
											    type: 'pie',
											    data: {
											      labels: ["Africa", "Asia", "Europe", "Latin America", "North America"],
											      datasets: [{
											        label: "Population (millions)",
											        backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
											        data: [2478,5267,734,784,433]
											      }]
											    },
											    options: {
											      title: {
											        display: true,
											        text: 'Predicted world population (millions) in 2050'
											      }
											    }
											});	
											</script>
								    	</div>
							    	</div>
			  			        	<div class="course-tags-modal">
								        {% if course_review.courseReviewTagId.weedOutCourse == 1 %}
								        	<button class="btn btn-outline-danger btn-sm " id="course-tag">Weed Out</button>
								        {% endif %}
										{% if course_review.courseReviewTagId.interestingContent == 1 %}
								        	<button class="btn btn-outline-primary btn-sm " id="course-tag">Interesting Content</button>
								        {% endif %}
								        {% if course_review.courseReviewTagId.lotsOfHomework == 1 %}
								        	<button class="btn btn-outline-warning btn-sm " id="course-tag">Lots of Homework</button>
								        {% endif %}
										{% if course_review.courseReviewTagId.mandatoryAttendance == 1 %}
								        	<button class="btn btn-outline-info btn-sm " id="course-tag"> Mandatory Attendance </button>
								        {% endif %}
							    	</div>
							    </div>
							    <div class="modal-footer">
								    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
							    </div>
						    </div>
						  </div>
						</div>
				        <p class="card-text">Instructor: {{course_review.instructorId.firstName}} {{course_review.instructorId.lastName}}</p>
				        <div class="card review-card">
					        <p class="review-title">Review</p>
					        <p class="review-text">{{course_review.review}}</p>
				        </div>
		    				
				    	<div class="progress">
							<div class="progress-bar" role="progressbar" style="width: {{course_review.rating_percentage}}%;" aria-valuenow="" aria-valuemin="0" aria-valuemax="10">
							</div>
							<span>{{course_review.rating}}/10</span>
					    </div>
					    <div class="course-tags-card">
					        {% if course_review.courseReviewTagId.weedOutCourse == 1 %}
						        <span class="badge badge-pill badge-danger"> </span>
					        {% endif %}
							{% if course_review.courseReviewTagId.interestingContent == 1 %}
						        <span class="badge badge-pill badge-primary"> </span>
					        {% endif %}
					        {% if course_review.courseReviewTagId.lotsOfHomework == 1 %}
						        <span class="badge badge-pill badge-warning"> </span>
					        {% endif %}
							{% if course_review.courseReviewTagId.mandatoryAttendance == 1 %}
						        <span class="badge badge-pill badge-info"> </span>
					        {% endif %}
				    	</div>
				    </div>
				    <div class="card-footer">
				      <small class="text-dark">Reviewed on {{course_review.reviewDate}}</small>
				    </div>
				</div>
				{% endfor %}
			</div>
			{% if course_reviews.has_other_pages %}
			  <ul class="pagination justify-content-center">
			    {% if course_reviews.has_previous %}
					<li class="page-item">
				      <a class="page-link" href="?page={{ course_reviews.previous_page_number }}" tabindex="-1">Previous</a>
				    </li>
			    {% else %}
			      	<li class="disabled"></li>
			    {% endif %}
			    {% for i in course_reviews.paginator.page_range %}
			      {% if course_reviews.number == i %}
			        <li class="active">
			        	<a class="page-link">{{ i }}<span class="sr-only">(current)</span></a>
			        </li>
			      {% elif i > course_reviews.number|add:'-3' and i < course_reviews.number|add:'3' %}
				    <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
			      {% endif %}
			    {% endfor %}
			    {% if course_reviews.has_next %}
			    <li class="page-item">
			    	<a class="page-link" href="?page={{ course_reviews.next_page_number }}">Next</a>
			    </li>
			    {% else %}
			      <li class="disabled"></li>
			    {% endif %}
			  </ul>
			{% endif %}
		</div>
		
	</div>
</div>
{% endblock %}
