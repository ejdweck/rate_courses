{% load staticfiles %}
{% load widget_tweaks %}

<!doctype html>
<html lang="en">
  <head>
    <title>¯\_(ツ)_/¯</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <!--
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- JQuery -->
    <link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
    <script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
    <script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
    <!-- local linked js and css files --> 
    <link href="{% static 'css/main.css' %}" rel="stylesheet">
    <script src="{% static 'js/javascript.js' %}"> </script>

  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="/">[Cool Name]</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link" href="{% url 'about' %}">About</a>
          <a href="#" class="nav-item nav-link" data-toggle="modal" data-target="#exampleModal" data-whatever="@getbootstrap">Add a Course Review</a>
        </div>
      </div>
    </nav>
    <script>
    $(function() {

    var courseDeptAndNumber = [
      {% for course in courses %}
          "{{ course.courseDepartment}}{{course.courseNumber}}" {% if not forloop.last %},{% endif %}
       {% endfor %}
    ];

    var instructorNames = [
       {% for name in instructors %}
          "{{ name.firstName }} {{ name.lastName }}" {% if not forloop.last %},{% endif %}
       {% endfor %}
    ];

    $( "#courseDepartmentAndNumber" ).autocomplete({
      source: courseDeptAndNumber
    });

    $( "#instructorName" ).autocomplete({
      source: instructorNames
    });

    });

    $(function() {
      var rating = $('#ratingSlider').val();
      console.log(rating)
    });

    $(document).on('input', '#rating', function() {
        $('#slider_value').html( $(this).val() );
    });

    // TODO change to jquery 
    function recordWeedOutButton(o){
      $('#weedOutButton').button('toggle') 
      if (document.getElementById('weedOutButton').classList.contains('active')) {
        document.getElementById('weedOutField').value=1;
      } else {
        document.getElementById('weedOutField').value=0;
      }
    }

    function recordInterestingContentButton(o){
      $('#interestingContentButton').button('toggle') 
      if (document.getElementById('interestingContentButton').classList.contains('active')) {
        document.getElementById('interestingContentField').value=1;
      } else {
        document.getElementById('interestingContentField').value=0;
      }
    }
    
    function recordLotsOfHomeworkButton(o){
      document.getElementById('lotsOfHomeworkButton').value=1;
      $('#lotsOfHomeworkButton').button('toggle') 
      if (document.getElementById('lotsOfHomeworkButton').classList.contains('active')) {
        document.getElementById('lotsOfHomeworkField').value=1;
      } else {
        document.getElementById('lotsOfHomeworkField').value=0;
      }
    }

    function recordMandatoryAttendanceButton(o){
      $('#mandatoryAttendanceButton').button('toggle') 
      if (document.getElementById('mandatoryAttendanceButton').classList.contains('active')) {
        document.getElementById('mandatoryAttendanceField').value=1;
      } else {
        document.getElementById('mandatoryAttendanceField').value=0;
      }
    }

    </script>
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">New Course Review</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-box add-course-review-form">
              <form method="post">
                {% csrf_token %}
                <div class="container addCourseReviewForm">
                  <h3 id="formTitle">Add a course review and help your fellow classmates!</h3>
                  <br>
                  <div class=row>
                    <div class="col">
                        <label for="courseDepartmentAndNumber">Course Code</label>
                        {% render_field form.courseDepartmentAndNumber id+="courseDepartmentAndNumber" class+="form-control courseDepartmentAndNumber" placeholder="cs537" %}
                          <small id="courseDepartmentAndNumber" class="form-text text-muted">Enter the course code exactly as it appears in the course guide - reviews with an incorrect course number may be subject to removal.</small>
                      </div>
                  </div>
                  <br>
                  <div class=row>
                      <div class="col">
                        <label for="instructorName">Instructor Name</label>
                          {% render_field form.instructorName id+="instructorName" class+="form-control instructorName" placeholder="Eric Clapton" %}
                          <small id="instructorName" class="form-text text-muted">Seperate first and last name by whitespace.</small>
                      </div>
                  </div>
                  <br>
                  <div class=row>
                      <div class="col">
                        <label id="ratingSlider" for="rating">Rating</label>
                          {% render_field form.rating id+="rating" class+="form-control rating" placeholder="" %}
                            <span id="slider_value">5</span>
                          <small id="rating" class="form-text text-muted">Rate from 1 to 10.</small>
                      </div>
                  </div>
                  <br>
                  <div class=row>
                      <div class="col">
                          <p>Select all that apply</p>
                          {% render_field form.weedOutCourse id+="weedOutField" class+="form-control course-review-tag-btn" %}
                          {% render_field form.interestingContent id+="interestingContentField" class+="form-control course-review-tag-btn" %}
                          {% render_field form.lotsOfHomework id+="lotsOfHomeworkField" class+="form-control " %}
                          {% render_field form.mandatoryAttendance id+="mandatoryAttendanceField" class+="form-control" %}
                          <button type=button class="btn btn-outline-danger lg course-review-tag-btn" id="weedOutButton" onclick="recordWeedOutButton(this)">Weed Out Course</button>
                          <button type=button class="btn btn-outline-primary lg course-review-tag-btn" id="interestingContentButton" onclick="recordInterestingContentButton(this)">Interesting Content</button>
                          <button type=button class="btn btn-outline-warning lg course-review-tag-btn" id="lotsOfHomeworkButton" onclick="recordLotsOfHomeworkButton(this)">Lots of Homework</button>
                          <button type=button class="btn btn-outline-info lg course-review-tag-btn" id="mandatoryAttendanceButton" onclick="recordMandatoryAttendanceButton(this)">MandatoryAttendance</button>
                      </div>
                  </div>
                  <br>
                  <div class=row>
                      <div class="col">
                        <label for="comments">Comments</label>
                          {% render_field form.review id+="comments" class+="form-control review" placeholder="any comments about the course" %}
                          <small id="comments" class="form-text text-muted">Any comments to justify your rating. Common topics to include are instructor difficulty or hours spent per week.</small>
                      </div>
                  </div>
                  <br>
                  <div class=row>
                    <div class="col">
                      <div class="form-actions">
                          <button class="btn btn-primary lg" type="submit">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>
    {% block content %}
    {% endblock %}

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!--
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- Tether, then Bootstrap JS. -->
    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    -->
  </body>
</html>
